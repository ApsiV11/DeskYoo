(this.webpackJsonpdeskyoo_frontend=this.webpackJsonpdeskyoo_frontend||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(40),c=n.n(r),l=(n(48),n(1)),s=(n(49),function(){return a.a.createElement("div",{className:"greenBox",id:"Header"},a.a.createElement("img",{src:"https://raw.githubusercontent.com/UisDangerouz/DeskYoo/master/logo.png",alt:"DeskYoo",width:"400px",height:"auto"}))}),u=n(41),i=n.n(u)()("".concat(window.location.hostname,":8080")),m=i.onevent;i.onevent=function(e){var t=e.data||[];m.call(this,e),e.data=["*"].concat(t),m.call(this,e)};window.sendRequest=function(e,t){e?i.emit(e,t):console.log("Event must be specified")};var d=i,E=function(e){var t=e.user,n=e.logOut,o=e.showNotification;return t?a.a.createElement("div",{className:"yellowBox",id:"UserInfo"},a.a.createElement("p",null,"Username: ",t.username),a.a.createElement("p",null,t.score," Yoo Points"),a.a.createElement("input",{style:{backgroundColor:"#F05035",border:"2px solid gray"},className:"LogInElement",type:"button",value:"Logout",onClick:function(){d.emit("LOGOUT"),n(),o("Logged out","green")}}),a.a.createElement("br",null),a.a.createElement("br",null)):null},f=n(16),g=function(e){var t=e.su,n=e.showNotification,r=Object(o.useState)(!0),c=Object(l.a)(r,2),s=c[0],u=c[1],i=Object(o.useState)(""),m=Object(l.a)(i,2),E=m[0],g=m[1],p=Object(o.useState)(""),S=Object(l.a)(p,2),b=S[0],v=S[1],y=Object(o.useState)(""),h=Object(l.a)(y,2),O=h[0],I=h[1],w=Object(o.useState)(!1),N=Object(l.a)(w,2),A=N[0],D=N[1];Object(o.useEffect)((function(){return d.on("LOGINSUCCESS",(function(){t(!0),document.getElementById("root").style.pointerEvents="auto"})),d.on("REGISTERSUCCESS",(function(){D(!0),document.getElementById("form").reset(),document.getElementById("root").style.pointerEvents="auto"})),function(){d.off("LOGINSUCCESS"),d.off("REGISTERSUCCESS")}}),[t]),Object(o.useEffect)((function(){u(!0)}),[A]);return a.a.createElement("div",{id:"loginContainer"},a.a.createElement("form",{id:"form",className:"yellowBox LogIn",onSubmit:s?function(e){e.preventDefault(),document.getElementById("root").style.pointerEvents="none",d.emit("LOGIN",[E,Object(f.sha256)(b+"tH15Is4S3cR3T")])}:function(e){e.preventDefault(),b===O&&b.length>4?(document.getElementById("root").style.pointerEvents="none",d.emit("REGISTER",[E,Object(f.sha256)(b+"tH15Is4S3cR3T")])):b!==O?n("Passwords don't match","red"):b.length<5&&n("Password too short","red")}},a.a.createElement("p",null,a.a.createElement("input",{placeholder:"Username",className:"LogInElement",type:"text",onChange:function(e){return g(e.target.value)}})),a.a.createElement("p",null,a.a.createElement("input",{placeholder:"Password",className:"LogInElement",type:"password",onChange:function(e){return v(e.target.value)}})),s?null:a.a.createElement("p",null,a.a.createElement("input",{placeholder:"Password confirm",className:"LogInElement",type:"password",onChange:function(e){return I(e.target.value)}})),a.a.createElement("input",{className:"greenBox LogInElement",type:"submit",onClick:function(){return n(s?"Login successful":"User creation successful","green")},value:s?"Login":"Register"})),a.a.createElement("input",{className:"LogInElement",type:"button",onClick:function(){u(!s),document.getElementById("form").reset(),g(""),v(""),I("")},value:s?"Register":"Login"}))},p=function(e){var t=(new Date-e)/1e3;return t<60?Math.round(t)+"s":t<3600?Math.round(t/60)+"min":t<86400?Math.round(t/3600)+"h":Math.round(t/86400)+"d"},S=function(e,t){e.preventDefault(),t()},b=function(e,t){e.preventDefault(),document.getElementById("root").style.pointerEvents="none",d.emit("GETANSWERSDISPLAYINFO",t)},v=function(e){var t=e.id,n=e.text,o=e.likes,r=e.location,c=e.color,l=e.time,s=e.messageType,u=e.cm,i={backgroundColor:["#E0BBE4","#AC91C8","#D291BC","#FEC8D8","#FFDFD3"][c||0],border:"2px solid gray"},m=p(l);return a.a.createElement("div",{className:"message",style:i},a.a.createElement("button",{onClick:function(e){if("Answer"!==s)return"Thread"===s?b(e,t):"OpenedThread"===s?S(e,u):void 0},className:"messageButton"},a.a.createElement("div",{className:"multilineText"},n),a.a.createElement("br",null),a.a.createElement("span",{role:"img","aria-label":"Location"},m," ago \ud83d\udccd",r)),a.a.createElement("div",{className:"messageLikeContainer"},a.a.createElement("button",{className:"likeButton"},"\u25b2"),a.a.createElement("p",{id:"likeText"},o),a.a.createElement("button",{className:"likeButton"},"\u25bc")))},y=n(4),h=n.n(y),O=n(6),I=n(42),w=n.n(I),N={getLocation:function(){var e=Object(O.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.geolocation.getCurrentPosition(function(){var e=Object(O.a)(h.a.mark((function e(n){var o,a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[n.coords.latitude.toString(),n.coords.longitude.toString()],e.next=3,w.a.get("".concat("https://api.opencagedata.com/geocode/v1/json?key=1ed54d9bab024ae5a6caea8eb9b76d67&q=").concat(o[0],"+").concat(o[1],"&pretty=1&no_annotations=1"));case 3:a=e.sent,(r=a.data.results[0]?a.data.results[0].components:{}).village?t(r.village):r.town?t(r.town):r.city?t(r.city):r.country&&t(r.country);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return console.log("Location not allowed")}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},A=function(e){var t=e.id,n=e.showNotification,r=e.messageType,c=Object(o.useState)(""),s=Object(l.a)(c,2),u=s[0],i=s[1],m=Object(o.useState)(null),E=Object(l.a)(m,2),f=E[0],g=E[1];Object(o.useEffect)((function(){return d.on("Answer"===r?"ADDANSWERSUCCESS":"ADDTHREADSUCCESS",(function(){document.getElementById("root").style.pointerEvents="auto",d.emit("Answer"===r?"GETANSWERSDISPLAYINFO":"GETTHREADSDISPLAYINFO",t)})),function(){"Answer"===r?d.off("ADDANSWERSUCCESS"):d.off("ADDTHREADSUCCESS")}}),[t,r]),Object(o.useEffect)((function(){function e(){return(e=Object(O.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N.getLocation((function(e){return g(e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);return a.a.createElement("div",{className:"yellowBox message"},a.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),u.length>0){document.getElementById("root").style.pointerEvents="none";var o="Answer"===r?"ADDANSWER":"ADDTHREAD";d.emit(o,[u,f&&0!==f.length?f:"Unknown",t])}else n("Yoo can't be empty","red");i(""),document.getElementById("texti").value=""}},a.a.createElement("textarea",{className:"messageInputTextBox",id:"texti",maxLength:"300",placeholder:"Answer"===r?"Write your answer here and press \ud83e\udd1f to send!":"Write your Yoo here and press \ud83e\udd1f to send!",type:"text",onChange:function(e){var t=e.target.value;t.split("\n").length>4&&(document.getElementById("texti").value=u,t=u),i(t)}}),a.a.createElement("button",{className:"sendMessageBtn",type:"submit",value:""},a.a.createElement("img",{className:"sendMessageBtnImage",src:"/logo192.png",alt:"Answer"===r?"Send new answer":"Send new thread"}))))},D=function(e){var t=e.messages,n=e.color,r=e.messageType,c=e.sm;return Object(o.useEffect)((function(){return d.on("ANSWERSDISPLAYINFO",(function(e){return document.getElementById("root").style.pointerEvents="auto",c(e)})),function(){d.off("ANSWERSDISPLAYINFO")}}),[c]),a.a.createElement("div",null,t.map((function(e){return a.a.createElement(v,{key:e.id,id:e.id,text:e.text,likes:e.likes,location:e.location,color:"Answer"===r?n:e.color,time:e.time,messageType:r})})))},j=function(e,t){e.preventDefault(),document.getElementById("root").style.pointerEvents="none",d.emit("GETTHREADSDISPLAYINFO",t)},C=function(e,t){e.preventDefault(),t()},x=function(e){var t=e.id,n=e.name,o=e.followers,r=e.ct;return a.a.createElement("div",null,a.a.createElement("button",{onClick:function(e){r?C(e,r):j(e,t)},className:r?"darkGreenBox channelInfo":"greenBox channelInfo"},"#",a.a.createElement("b",null,n),a.a.createElement("br",null),o,a.a.createElement("span",{role:"img","aria-label":"Followers"},"\ud83d\udc64")))},T=function(e){var t=e.channels,n=e.st,r=e.ct,c=e.openedChannel;return Object(o.useEffect)((function(){return d.on("THREADSDISPLAYINFO",(function(e){return document.getElementById("root").style.pointerEvents="auto",n(e)})),function(){d.off("THREADSDISPLAYINFO")}}),[n]),t?a.a.createElement("div",null,t.map((function(e){return a.a.createElement(x,{key:e.id,id:e.id,name:e.text,followers:e.followers,ct:e.id!==c?null:r})}))):null},L=function(e){var t=e.message,n={color:e.color,background:"white",fontSize:"20px",textAlign:"center",borderStyle:"solid",borderRadius:"10px",padding:"10px",paddingLeft:"0px",paddingRight:"0px",width:"50%",position:"absolute",left:"25%",right:"25%"};return null===t?null:a.a.createElement("div",{style:n},t)},B=function(e,t,n,o){e.on("connect_error",(function(){t("Cannot connect to server","red")})),e.on("disconnect",(function(){t("Server disconnected","red")})),e.on("*",(function(e,t){console.log("EVENT: ".concat(e," DATA: ")),console.log(t)})),e.on("USERERROR",(function(e){document.getElementById("root").style.pointerEvents="auto",t(e,"red")})),e.on("USERNOTLOGGED",(function(){document.getElementById("root").style.pointerEvents="auto",t("User logged out.","red")})),e.on("USERDISPLAYINFO",(function(e){document.getElementById("root").style.pointerEvents="auto",n(e)})),e.on("CHANNELSDISPLAYINFO",(function(e){document.getElementById("root").style.pointerEvents="auto",o(e)}))},k=function(){var e=Object(o.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(o.useState)(null),u=Object(l.a)(c,2),i=u[0],m=u[1],f=Object(o.useState)([]),p=Object(l.a)(f,2),S=p[0],b=p[1],y=Object(o.useState)(null),h=Object(l.a)(y,2),O=h[0],I=h[1],w=Object(o.useState)([]),N=Object(l.a)(w,2),j=N[0],C=N[1],x=Object(o.useState)(null),k=Object(l.a)(x,2),R=k[0],U=k[1],F=Object(o.useState)({message:null,color:"green"}),P=Object(l.a)(F,2),Y=P[0],G=P[1],H=Object(o.useCallback)((function(e){I(null),m(null),b([]),r([]),e[0].text&&b(e),I(e[0].parentId)}),[]),W=Object(o.useCallback)((function(e){m(null),r([]),console.log(e);var t=S.find((function(t){return t.id===e[0].parentId}));e[0].text&&r(e),m(t)}),[S]),M=Object(o.useCallback)((function(e){U(e)}),[]),_=function(e){C(e)},q=function(e,t){G({message:e,color:t}),setTimeout((function(){G({message:null,color:t})}),4e3)};return Object(o.useEffect)((function(){R&&!R.username&&(d.emit("GETUSERDISPLAYINFO"),d.emit("GETCHANNELSDISPLAYINFO"))}),[R]),Object(o.useEffect)((function(){B(d,q,M,_)}),[M]),a.a.createElement("div",null,a.a.createElement(s,null),a.a.createElement("br",null),a.a.createElement(L,{message:Y.message,color:Y.color}),a.a.createElement("br",null),R?a.a.createElement("div",{className:"row"},a.a.createElement("div",{id:"channelColumn"},a.a.createElement(E,{user:R,logOut:function(){r([]),m(null),b([]),I(null),C([]),U(null)},showNotification:q}),a.a.createElement(T,{channels:j,st:H,ct:function(){b([]),I(null),m(null),r([])},openedChannel:O})),a.a.createElement("div",{id:"messageColumn"},i?a.a.createElement("div",null,a.a.createElement(v,{text:i.text,likes:i.likes,location:i.location,color:i.color,time:i.time,messageType:"OpenedThread",cm:function(){r([]),m(null)}}),a.a.createElement(D,{messages:n,color:i.color,messageType:"Answer",sm:W}),a.a.createElement(A,{id:i.id,showNotification:q,messageType:"Answer"})):O?a.a.createElement("div",null,a.a.createElement(A,{id:O,showNotification:q,messageType:"Thread"}),a.a.createElement(D,{messages:S,messageType:"Thread",sm:W})):null)):a.a.createElement(g,{su:M,showNotification:q}))};c.a.render(a.a.createElement(k,null),document.getElementById("root"))},43:function(e,t,n){e.exports=n(100)},48:function(e,t,n){},49:function(e,t,n){},79:function(e,t){}},[[43,1,2]]]);
//# sourceMappingURL=main.60482227.chunk.js.map